<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        .primary {background: #409eff;}
        .danger {background: #f56c6c;}
        .success {background: #67c23e;}
        .warning {background: #e6a23c;}
    </style>
</head>
<script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.min.js">
</script>
<script type="text/javascript" src="coolBtn.js">
</script>
<body>
    <table border="1" cellpadding="0" cellspacing="0">
        <tr>
            <th colspan=2 align=center>登陆界面</th>
        </tr>
        <tr>
            <td>请输入用户名：</td>
            <td><input v-on:focus="handleFocus" v-on:blur="handleBlur" :style= "userNameStyle" v-model="username" type="text" name="user" size="16"></td>
        </tr>
        <tr>
            <td>请输入用户名：</td>
            <td><input v-model= "password" type="text" name="user" size="16"></td>
        </tr>
        <tr>
            <td>请选择身份：</td>
            <td>
                <select v-model="role">
                    <option v-for ="(role,index) in roleList" v-bind:value="role.value">{{index+1}}.{{role.label}}</option>

                </select>
            </td>
        </tr>
        <tr>
            <td colspan="2" align="right" @click.once="modelClick">
                <span style="color:red;" v-text="errMsg"></span>
                <!--<input v-if="!isLogining" type= submit value= '登录' @click="btnClick" style="background: deepskyblue;
                color: #fff; border:none;padding: 2px 10px;border-radius: 6px; margin: 2px 6px;">
                <input v-else type=submit value= '登陆中...'>-->
                <cool-btn :name= "'登录'" @btn-click= "login"> </cool-btn>
            </td>
        </tr>
    </table>
    <script type="text/javascript">
        var vue = new Vue({
            el:'table',
            data: {
                role: '1',
                isLogining:false,
                username:'jack',
                password:'123132131',
                errMsg:'',
                userNameStyle:{},
                roleList:[
                    {value: '1',label: '我是游客'},
                    {value: '2',label: '我是普通用户'},
                    {value: '3',label: '我是管理员'},
                ],
            },
            methods:{
                handleFocus: function(){
                    this.userNameStyle={
                        borderColor:'pink',
                        margin:'16px'
                    };
                },
                handleBlur: function(){
                    this.userNameStyle={};
                },
                modelClick: function(){
                    console.log('modelClick');
                },
                btnClick: function(){
                    console.log('btnClick');
                    this.isLogining = true;
                    var that = this;
                    //模拟发起请求，2秒后后台返回结果
                    setTimeout(function(){
                        alert();
                        that.errMsg = '登录失败，请检查密码是否正确？';
                        that.isLogining = false;
                    },2000);
                },
                login:function(){
                    alert('登录成功！');
                }
            }
        })
    </script>
</body>
</html>